(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[160],{87148:function(e,s,a){Promise.resolve().then(a.bind(a,36308))},36308:function(e,s,a){"use strict";a.r(s);var n=a(57437),t=a(2265),l=a(24033),c=a(64207),i=a.n(c),r=a(99835),d=a(49698),h=a(3467),m=a(10479),o=a(45057),u=a(43295),x=a(61396),f=a.n(x),y=a(97187);s.default=function(e){let{address:s}=(0,r.m)(),a=(0,l.useSearchParams)(),c=a.get("uid"),x=a.get("index_no"),j={name:"",uid:c,detail:""},[N,p]=(0,t.useState)(j),[g,k]=(0,t.useState)(0);(0,t.useRef)(g);let[b,w]=(0,t.useState)(0),[v,_]=(0,t.useState)(""),S=(0,l.useRouter)(),C=async(e,s,a)=>{let n=await (0,h.L)(u.v,{abi:y.z,address:d.FP,functionName:"getStakeDetail",args:[e,s,a]});k((0,d.mX)(n[0])),w((0,d.mX)(n[1]))},P=e=>new Promise(s=>{let a=d.JW+"/api/pool?uid="+e;fetch(a).then(e=>e.json()).then(e=>{j=e,p(e),s(j)}).catch(e=>{_("Fetch error:"+e)})}),R=async e=>{let a=await (0,m.n)(u.v,{abi:y.z,address:d.FP,functionName:"unstake",args:[N.uid,e]}),n=(0,o.e)(u.v,{hash:a});n.then(async e=>{C(s,c,x).then(()=>{E(s,N.uid,x)})})},E=(e,s,a)=>{let n={address:e,uid:s,index_no:a};n=JSON.stringify(n);let t=d.JW+"/api/stakes/unstaked";fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:n}).then(e=>e.json()).then(async e=>{S.push("/my-stakings")}).catch(e=>{console.error("Fetch error:",e)})};return(0,t.useEffect)(()=>{P(c),C(s,c,x)},[]),(0,n.jsxs)("main",{children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:"Claim Reward and Unstake"})}),(0,n.jsx)("h1",{className:"fs-5 my-5 b",children:"Claim Reward & Unstake"}),(0,n.jsxs)("div",{style:{maxWidth:"800px",margin:"0 auto"},className:"bg bd rd px-4 py-4",children:[(0,n.jsx)("h2",{className:"cen white fs-5",children:N.name}),(0,n.jsxs)("div",{className:"flex",style:{justifyContent:"space-between"},children:[(0,n.jsxs)("p",{className:"cen flex1 gray my-3",children:["Pool Id # ",c]}),(0,n.jsxs)("p",{className:"cen flex1 gray my-3",children:["Index No # ",x]})]}),(0,n.jsxs)("div",{className:"flex my-4",children:[(0,n.jsx)("div",{className:"flex1",children:(0,n.jsxs)("p",{className:"fs-3 bg rd py-2 gray cen",children:["Staked Amount:",(0,n.jsxs)("span",{className:"green",children:["  ",g," ",N.staking_token_name," "]})]})}),(0,n.jsx)("div",{className:"lg-only px-2"}),(0,n.jsx)("div",{className:"flex1",children:(0,n.jsxs)("p",{className:"fs-3 bg rd py-2 gray cen",children:["Reward Available:",(0,n.jsxs)("span",{className:"green",children:["  ",(0,d.NM)(b)," ",N.reward_token_name," "]})]})})]}),(0,n.jsx)("div",{children:(0,n.jsxs)("ul",{className:"fs-2 gray",children:[(0,n.jsx)("li",{className:"py-1",children:"Reward and Staked tokens both will be sent to your connected wallet."}),(0,n.jsxs)("li",{className:"py-1",children:[(0,n.jsxs)("span",{className:"tcs",children:[N.sacrifice,"%"]})," Early unstaking fee will be charged on early unstaking."]}),(0,n.jsxs)("li",{className:"py-1",children:["Any ",(0,n.jsx)("span",{className:"tcs",children:" Fee charged by Token "})," is not in account because that is implemented inside token smart contract."]})]})}),(0,n.jsxs)("div",{className:"form-element cen my-3 flex mt-30",children:[(0,n.jsx)("button",{className:"mx-2",onClick:()=>{R(x)},children:"Claim Reward & Unstake"}),(0,n.jsx)(f(),{className:"mx-2 btn",href:"/stake/?uid="+c,children:"View Pool"})]})]})]})}}},function(e){e.O(0,[731,396,891,749,478,515,971,864,744],function(){return e(e.s=87148)}),_N_E=e.O()}]);