(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[555],{14777:function(e,t,n){Promise.resolve().then(n.bind(n,47902))},34294:function(e,t,n){"use strict";n.d(t,{W:function(){return a}});let a=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_maxTxAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"_addresses",type:"address[]"}],name:"batchWhitelist",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}]},47902:function(e,t,n){"use strict";n.r(t);var a=n(57437),s=n(2265),i=n(24033),r=n(49698),d=n(3467),l=n(10479),p=n(45057),u=n(43295),o=n(97187),c=n(34294);t.default=function(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),n=t.get("uid"),y=t.get("token"),[m,x]=(0,s.useState)({name:"Test Pool",uid:n,detail:"some detail to be added here."}),[f,b]=(0,s.useState)(0),[h,v]=(0,s.useState)(0),[w,T]=(0,s.useState)(0),[N,j]=(0,s.useState)(0),[g,k]=(0,s.useState)(0),[M,S]=(0,s.useState)(0),[P,_]=(0,s.useState)((0,a.jsx)(a.Fragment,{}));async function A(){let e=await (0,d.L)(u.v,{abi:o.z,address:r.FP,functionName:"poolMinReward",args:[n]});k((0,r.mX)(e))}let R=async e=>{let t=r.JW+"/api/pools/"+e;alert(t);let n=await fetch(t),a=await n.json();alert(JSON.stringify(a)),x(a)},O=async()=>{alert(m.reward_token_address);let e=await (0,l.n)(u.v,{abi:c.W,address:m.reward_token_address,functionName:"approve",args:[r.FP,(0,r.r0)(g)]});return(0,p.e)(u.v,{hash:e})},F=async()=>{let e=m.uid,t=(0,r.r0)(g+"")+"",n=await (0,l.n)(u.v,{abi:o.z,address:r.FP,functionName:"supplyReward",args:[e,t+""]});return(0,p.e)(u.v,{hash:n})};async function C(e){return new Promise(async t=>{let n=await (0,d.L)(u.v,{abi:o.z,address:r.FP,functionName:"getPoolDetails",args:[e]});b((0,r.mX)(n[0])),v((0,r.mX)(n[1])),T((0,r.mX)(n[2])),j(n[3].toString()),S((0,r.mX)(n[4])),t()})}return(0,s.useEffect)(()=>{R(m.uid)},[]),(0,s.useEffect)(()=>{C(m.uid),A()},[]),(0,a.jsxs)("main",{children:[(0,a.jsx)("h1",{children:"Add Rewards to Pool"}),(0,a.jsxs)("div",{style:{maxWidth:"800px",margin:"0 auto"},className:"bg px-3 py-3",children:[(0,a.jsx)("h2",{className:"cen tcs",children:m.name}),(0,a.jsxs)("p",{className:"cen gray",children:["Pool Id # ",n]}),(0,a.jsx)("div",{className:"py-3 px-2 gray",children:(0,a.jsx)("p",{className:"cen",style:{lineHeight:"25px"},children:m.detail})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"bd rd bg py-2 cen flex1 fs-2 m1",children:[" Amount Staked : ",(0,a.jsxs)("span",{className:"tcs",children:[" ",w," ",m.staking_token_name]})]}),(0,a.jsxs)("div",{className:"bd rd bg py-2 cen flex1 fs-2 m1",children:[" Reward Available : ",(0,a.jsxs)("span",{className:"tcs",children:[" ",f," ",y]})]})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"bd rd bg py-2 cen flex1 fs-2 m1",children:[" Max Possible Staking : ",(0,a.jsxs)("span",{className:"tcs",children:[" ",m.maxAmount," "]})]}),(0,a.jsxs)("div",{className:"bd rd bg py-2 cen flex1 fs-2 m1",children:[" Total Stakers : ",(0,a.jsxs)("span",{className:"tcs",children:[" ",N," "]})]})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"bd rd bg py-2 cen flex1 fs-2 m1",children:[" Staking Period : ",(0,a.jsxs)("span",{className:"tcs",children:[" ",m.period," "]})]}),(0,a.jsxs)("div",{className:"bd rd bg py-2 cen flex1 fs-2 m1",children:[" APY % : ",(0,a.jsxs)("span",{className:"tcs",children:[" ",m.reward_percentage,"% "]})]})]}),(0,a.jsx)("div",{className:"flex px-2",children:(0,a.jsxs)("div",{className:"form-element w100p",children:[(0,a.jsxs)("label",{style:{width:"40%"},children:["Number of Tokens (",y,")"]}),(0,a.jsx)("input",{min:g,className:"flex1",type:"number",step:100,placeholder:"tokens",value:g}),(0,a.jsx)("p",{className:"gray py-3",children:"Reward deposits can guarantee the pool's trustworthiness"})]})}),(0,a.jsx)("div",{className:"",style:{height:"30px"},children:P}),(0,a.jsx)("div",{className:"form-element py-3 right",children:(0,a.jsx)("button",{className:"mx-2",onClick:()=>{_((0,a.jsxs)("div",{className:"flex-always",children:[(0,a.jsx)("div",{className:"spinner mx-2"}),(0,a.jsx)("div",{className:"flex1 px-2",children:"Approving reward tokens..."})]})),O().then(()=>(_((0,a.jsx)("div",{className:"b green",children:"Reward tokens approved successfully."})),setTimeout(()=>{_((0,a.jsxs)("div",{className:"flex-always",children:[(0,a.jsx)("div",{className:"spinner mx-2"}),(0,a.jsx)("div",{className:"flex1 px-2",children:"Adding reward to pool..."})]}))},2500),F())).then(()=>(_((0,a.jsx)("div",{className:"b green",children:"Reward added successfully."})),setTimeout(()=>{_("")},500),C(m.uid))).then(()=>setTimeout(()=>{e.push("/stake/?uid="+n)},500))},children:"Add Reward"})})]})]})}},24033:function(e,t,n){e.exports=n(20290)},3467:function(e,t,n){"use strict";n.d(t,{L:function(){return p}});var a=n(3458),s=n(53883),i=n(65573),r=n(82600),d=n(51578);async function l(e,t){let{abi:n,address:l,args:p,functionName:u,...o}=t,c=(0,s.R)({abi:n,args:p,functionName:u});try{let{data:t}=await (0,r.s)(e,d.R,"call")({...o,data:c,to:l});return(0,a.k)({abi:n,args:p,functionName:u,data:t||"0x"})}catch(e){throw(0,i.S)(e,{abi:n,address:l,args:p,docsPath:"/docs/contract/readContract",functionName:u})}}function p(e,t){let{chainId:n}=t,a=e.getClient({chainId:n});return l(a,t)}}},function(e){e.O(0,[731,891,132,515,971,864,744],function(){return e(e.s=14777)}),_N_E=e.O()}]);