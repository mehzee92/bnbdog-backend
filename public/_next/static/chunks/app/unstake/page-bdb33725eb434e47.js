(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[137],{65091:function(e,s,n){Promise.resolve().then(n.bind(n,42954))},42954:function(e,s,n){"use strict";n.r(s);var a=n(57437),t=n(2265),i=n(24033),r=n(64207),c=n.n(r),l=n(99835),d=n(49698),o=n(10479),h=n(45057),u=n(3467),m=n(43295),x=n(61396),f=n.n(x),j=n(97187);s.default=function(){let{address:e}=(0,l.m)(),s=(0,i.useSearchParams)(),n=s.get("uid"),r=s.get("index_no"),x={name:"Pool",uid:n,detail:""},[p,N]=(0,t.useState)(x),[k,g]=(0,t.useState)(0),[w,y]=(0,t.useState)(0),b=(0,t.useRef)(k),[_,v]=(0,t.useState)(0),[P,S]=(0,t.useState)(""),C=e=>new Promise(s=>{let n=d.JW+"/api/pool?uid="+e;fetch(n).then(e=>e.json()).then(e=>{x=e,g(e.amount),N(e),s()}).catch(e=>{S("Fetch error:"+e)})}),E=(e,s,n)=>{let a=d.JW+"/api/stakes/delete";fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e,uid:s,index_no:n})}).then(e=>e.json()).then(async e=>{}).catch(e=>{console.error("Fetch error:",e)})},F=async()=>{let s=await (0,o.n)(m.v,{abi:j.z,address:d.FP,functionName:"unstake",args:[p.uid,r]}),n=(0,h.e)(m.v,{hash:s});n.then(async s=>{O().then(()=>{E(e,p.uid,r)})})};async function O(){return new Promise(async s=>{let n=await (0,u.L)(m.v,{abi:j.z,address:d.FP+"",functionName:"getBalanceApprove",args:[x.staking_token_address+"",e+"",p.uid+""]});v((0,d.mX)(n[0])),g(()=>(0,d.mX)(n[2])),y((0,d.mX)(n[3])),b.current=(0,d.mX)(n[2]),s()})}return(0,t.useEffect)(()=>{C(p.uid).then(()=>O())},[]),(0,a.jsxs)("main",{children:[(0,a.jsx)(c(),{children:(0,a.jsx)("title",{children:"Unstake Now"})}),(0,a.jsx)("h1",{children:"Unstake Now"}),(0,a.jsxs)("div",{style:{maxWidth:"800px",margin:"0 auto"},className:"bg  px-3 py-3",children:[(0,a.jsx)("h2",{className:"cen tcs",children:p.name}),(0,a.jsxs)("p",{className:"cen gray",children:["Pool Id # ",n]}),(0,a.jsx)("p",{className:"cen red fs-2 white",children:"Please claim your reward before unstaking."}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"fs-2 box gray cen",children:["Staked Tokens:",(0,a.jsxs)("span",{className:"green",children:["  ",k," ",p.staking_token_name," "]})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"fs-2 gray box cen",children:["Available Reward",(0,a.jsxs)("span",{className:"green",children:["  ",w," ",p.reward_token_name," "]})]})})]}),(0,a.jsxs)("div",{className:"form-element right",children:[(0,a.jsx)(f(),{href:"/claim-reward?uid="+p.uid,className:"px-2 white box ",children:"Claim Reward"}),(0,a.jsx)("button",{className:"mx-2",onClick:()=>{F()},children:"Unstake"})]})]})]})}}},function(e){e.O(0,[731,891,396,132,187,515,971,864,744],function(){return e(e.s=65091)}),_N_E=e.O()}]);